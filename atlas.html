<html>
    <head>
        <meta charset="utf-8"/>
        <title>Atlas</title>
        <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no"/>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
        <script src="https://api.mapbox.com/mapbox.js/v2.2.1/mapbox.js"></script>
        <script src="https://api.mapbox.com/mapbox.js/plugins/leaflet-label/v0.2.1/leaflet.label.js"></script>
        <script src="ext/socket.io-client.js"></script>
        <script src="js/atlas.js"></script>
        <script src="js/order.js"></script>
        <script src="js/events.js"></script>
        <script src="js/mapbox.js"></script>
        <link href="https://api.mapbox.com/mapbox.js/v2.2.1/mapbox.css" rel="stylesheet"/>
        <link href="https://api.mapbox.com/mapbox.js/plugins/leaflet-label/v0.2.1/leaflet.label.css" rel='stylesheet'/>
        <link href="css/atlas.css" rel="stylesheet"/>
    </head>
    
    <body>

        <!-- 
        <table style="position: absolute; width: 100%; height: 100%; font: 7pt Arial; background-color: rgba(0,0,0,0); z-index:9999">
            <tr><td valign="middle" align="center">
                <div style="text-align: left; background-color:white;display:inline-block;width: 200px; height:400px;border-radius:5px;border:2px solid blue">
                    <div>New order Entry form <span style="float:right;">x</span></div>
                    Name:<input type="text"/>
                    Address:<input type="text"/>
                    Body:<input type="text"/>
                </div>
            </td></tr>
        </table>-->

    
        <div style="display: table; width: 100%; height: 100%; font: 7pt Arial;">
            
            <div style="display: table-row; height: 0px; background-color: #6eb825;">
                <div id="header" style="height: 100%; border-bottom: 2px solid #beb8b2; padding: 7px; position: relative;">
                    <div style="position: absolute; right: 0; bottom: 0; margin-right: 30px; margin-bottom: 8px;">
                        <img style="margin-right: 5px;" src="img/add-white.png"/><img style="margin-left: 5px;" src="img/gear-white.png"/>
                    </div>
                    <img src="img/bento-logo-white.svg" width="15%" onclick="greet();"/>
                </div>
            </div>
        
            <!-- center row -->
            <div style="display: table-row;">
                
                <div style="display: table; width: 100%; height: 100%;">
                    
                    <!-- map and console -->
                    <div style="display: table-cell;">
                        <div style="display: table; height: 100%; width: 100%;">
                            <div style="display: table-row;">
                                <!-- Some content needed in this div for proper positioning (not sure why) -->
                                <div id="map" style="display: table-cell;">&nbsp;</div>
                            </div>
                            <div style="display: table-row; height: 0px;">
                                <textarea readonly id="console" style="height: 107px; width: 100%;"></textarea>
                            </div>
                        </div>
                    </div>
                    
                    <!-- side-pane -->
                    <div id="side-pane" style="display: table-cell; width: 220px;">
                        New Orders
                        <div id="new-orders">
                            <div id="driver_0" class="driver-container">
                                <div class="orders">
                                    <div id="0_orders-pending">
                                    <!--
                                        <div id="order_503" class="order" position="0"><span class="order-status-symbol modified">!</span><span class="order-address">488 Battery St</span><span class="order-name">Eric O'Donnel</span><span style="display:table-cell;vertical-align:middle;text-align:right;"><img class="gear-icon" src="img/gear.png"/></span></div>
                                        -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        <br/>
                        Connected
                        <div id="online-drivers">
                            <!-- Example-->
                            <div id="driver_900" class="driver-container">
                                <div class="driver-header">
                                    <span class="folding-symbol collapsed"></span><span class="status-symbol online"></span><span class="driver-name">Marc Doan</span><img class="gear-icon" src="img/gear.png"/>
                                </div>
                                <div class="900_orders">
                                    <div class="order-status-header">Pending<span class="hide">Hide</span></div>
                                    <div id="900_orders-pending">
                                        <div id="order_501" class="order" priority="0" draggable="true"><span class="order-status-symbol modified">!</span><span class="order-address">2017 Mission St</span><span class="order-name">Robert Cedarfield</span><span style="display:table-cell;vertical-align:middle;text-align:right;"><img class="gear-icon" src="img/gear.png"/></span></div>
                                        <div id="order_502" class="order" priority="1" draggable="true"><span class="order-status-symbol rejected">&#x2715;</span><span class="order-address">427 Stockton St</span><span class="order-name">Buffy Summers</span><span style="display:table-cell;vertical-align:middle;text-align:right;"><img class="gear-icon" src="img/gear.png"/></span></div>
                                        <div id="order_505" class="order" priority="2" draggable="true"><span class="order-status-symbol modified">!</span><span class="order-address">25 Divisadero Ave</span><span class="order-name">Alex Battaglia</span><span style="display:table-cell;vertical-align:middle;text-align:right;"><img class="gear-icon" src="img/gear.png"/></span></div>
                                        <div class="order dummy" priority="-1"></div>
                                    </div>
                                    <div class="order-status-header">Complete<span class="hide">Hide</span></div>
                                    <div id="900_orders-complete">
                                        <div id="order_506" class="order" priority="0"><span class="order-status-symbol modified" style="visibility: hidden;"></span><span class="order-address">1 Market St</span><span class="order-name">Quentin Taratino</span></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <br/>
                        Unavailable
                        <div id="offline-drivers"></div>
                    </div>
            
                </div> <!-- table -->
            </div> <!-- center row -->

        <div style="display: table-row; height: 0px;">
            <div id="footer" style="border-top: 2px solid #beb8b2; background-color: #6eb825; padding: 4px; font: 7pt Arial; color: white; text-align: center">
                Copyright &copy; Bento Technology, Inc. 2015
            </div>
        </div>

    </div>

    <script type="text/javascript">
        /* Write to console */
        function println(msg) {
            var console = $('#console');
            console.append(msg + '\n');
            console.scrollTop(console.height());
        }

        var map = L.mapbox.map('map', 'mapbox.streets');
        var address = encodeURI('2017 Mission St, San Francisco, 94110, California, United States');
        $.ajax({
            url: "https://api.mapbox.com/v4/geocode/mapbox.places/"+address+".json?access_token="+L.mapbox.accessToken,
        }).done(function (res) {
            var center = res.features[0].center;
            map.setView([center[1], center[0]], 16);
        });
      
        connect();
    </script>
  </body>
</html>
